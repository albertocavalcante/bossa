# --- Lefthook Configuration ---
# See: https://github.com/evilmartians/lefthook

pre-commit:
  parallel: true
  commands:
    # Check Rust formatting
    cargo-fmt:
      glob: "*.rs"
      run: cargo fmt -- --check

    # Run Clippy linter
    cargo-clippy:
      glob: "*.rs"
      run: cargo clippy --all-targets --all-features -- -D warnings

    # Check Markdown formatting
    dprint-md:
      glob: "*.md"
      run: dprint check {staged_files}

    # Check TOML formatting
    dprint-toml:
      glob: "*.toml"
      run: dprint check {staged_files}

    # Check JSON formatting
    dprint-json:
      glob: "*.json"
      run: dprint check {staged_files}

pre-push:
  commands:
    # Run tests before pushing
    cargo-test:
      run: cargo test --quiet

    # Ensure it builds in release mode
    cargo-build:
      run: cargo build --release --quiet
